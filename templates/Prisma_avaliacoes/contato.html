{% extends 'base.html' %}
{% load static %}

{% block title %}Contato - Prisma Avaliações Imobiliárias{% endblock %}

{% block content %}
<section class="py-5 bg-light" style="margin-top: 80px;">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center mb-5">
                <h1 class="display-5 fw-bold text-dark mb-4">
                    {{ titulo }}
                </h1>
                <p class="lead text-muted">
                    Estamos prontos para atender suas necessidades de avaliação imobiliária
                </p>
            </div>
        </div>
        
        <div class="row g-5">
            <div class="col-lg-8">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-5">
                        <h3 class="fw-bold mb-4">Envie sua Mensagem</h3>
                        
                        <form id="contactPageForm">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="nome" class="form-label">Nome Completo *</label>
                                    <input type="text" class="form-control" id="nome" name="nome" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="telefone" class="form-label">Telefone *</label>
                                    <input type="tel" class="form-control" id="telefone" name="telefone" required>
                                </div>
                                <div class="col-12">
                                    <label for="email" class="form-label">E-mail *</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="tipo_imovel" class="form-label">Tipo de Imóvel *</label>
                                    <select class="form-select" id="tipo_imovel" name="tipo_imovel" required>
                                        <option value="">Selecione o tipo</option>
                                        <option value="residencial">Residencial</option>
                                        <option value="comercial">Comercial</option>
                                        <option value="terreno">Terreno</option>
                                        <option value="apartamento">Apartamento</option>
                                        <option value="casa">Casa</option>
                                        <option value="galpao">Galpão</option>
                                        <option value="sitio">Sítio/Chácara</option>
                                        <option value="outro">Outro</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="cidade" class="form-label">Cidade do Imóvel</label>
                                    <input type="text" class="form-control" id="cidade" name="cidade" placeholder="Ex: Salvador, BA">
                                </div>
                                <div class="col-12">
                                    <label for="mensagem" class="form-label">Mensagem *</label>
                                    <textarea class="form-control" id="mensagem" name="mensagem" rows="5" 
                                        placeholder="Descreva detalhes do imóvel, finalidade da avaliação, prazo desejado..." required></textarea>
                                </div>
                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="termos" required>
                                        <label class="form-check-label" for="termos">
                                            Aceito receber contato da Prisma Avaliações via WhatsApp e e-mail *
                                        </label>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <button type="submit" class="btn btn-primary btn-lg">
                                        <i class="fab fa-whatsapp me-2"></i>Enviar via WhatsApp
                                    </button>
                                    <small class="text-muted d-block mt-2">
                                        * Campos obrigatórios
                                    </small>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-body p-4">
                        <h5 class="fw-bold mb-3">
                            <i class="fas fa-phone text-primary me-2"></i>Contato Direto
                        </h5>
                        <div class="contact-info">
                            <p class="mb-2">
                                <strong>WhatsApp:</strong><br>
                                <a href="https://wa.me/5577998311920" target="_blank" class="text-decoration-none">
                                    (77) 99831-1920
                                </a>
                            </p>
                            <p class="mb-2">
                                <strong>E-mail:</strong><br>
                                <a href="mailto:contato@prismaavaliacoes.com.br" class="text-decoration-none">
                                    contato@prismaavaliacoes.com.br
                                </a>
                            </p>
                            <p class="mb-0">
                                <strong>Localização:</strong><br>
                                Brasilia, Brasil
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-body p-4">
                        <h5 class="fw-bold mb-3">
                            <i class="fas fa-clock text-primary me-2"></i>Horário de Atendimento
                        </h5>
                        <ul class="list-unstyled mb-0">
                            <li class="mb-2">
                                <strong>Segunda a Sexta:</strong><br>
                                08:00 às 18:00
                            </li>
                            <li class="mb-2">
                                <strong>Sábado:</strong><br>
                                08:00 às 12:00
                            </li>
                            <li>
                                <strong>Domingo:</strong><br>
                                Fechado
                            </li>
                        </ul>
                    </div>
                </div>
                
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <h5 class="fw-bold mb-3">
                            <i class="fas fa-info-circle text-primary me-2"></i>Como Funciona
                        </h5>
                        <ol class="mb-0">
                            <li class="mb-2">Envie suas informações pelo formulário</li>
                            <li class="mb-2">Entraremos em contato em até 2 horas</li>
                            <li class="mb-2">Agendamos a vistoria do imóvel</li>
                            <li>Entregamos o laudo em até 5 dias úteis</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Seção Call to Action -->
<section class="py-5 bg-primary text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h3 class="fw-bold mb-2">Precisa de uma resposta rápida?</h3>
                <p class="mb-0 lead">Fale conosco diretamente pelo WhatsApp e receba atendimento imediato</p>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a href="https://wa.me/5577998311920" target="_blank" class="btn btn-light btn-lg">
                    <i class="fab fa-whatsapp me-2"></i>WhatsApp Direto
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
// JavaScript específico para a página de contato
document.getElementById('contactPageForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Validação específica desta página
    const termos = document.getElementById('termos');
    if (!termos.checked) {
        alert('Por favor, aceite os termos para continuar.');
        return;
    }
    
    // Coleta os dados do formulário
    const nome = document.getElementById('nome').value;
    const telefone = document.getElementById('telefone').value;
    const email = document.getElementById('email').value;
    const tipoImovel = document.getElementById('tipo_imovel').value;
    const cidade = document.getElementById('cidade').value;
    const mensagem = document.getElementById('mensagem').value;
    
    // Monta a mensagem para o WhatsApp
    const whatsappMessage = `
*Contato via Site - Página de Contato*

*Dados do Cliente:*
• Nome: ${nome}
• Telefone: ${telefone}
• E-mail: ${email}
• Tipo de Imóvel: ${tipoImovel}
${cidade ? `• Cidade: ${cidade}` : ''}

*Mensagem:*
${mensagem}

_Enviado através da página de contato da Prisma Avaliações_
    `.trim();
    
    // Codifica a mensagem para URL
    const encodedMessage = encodeURIComponent(whatsappMessage);
    
    // Abre o WhatsApp com a mensagem
    const whatsappURL = `https://wa.me/5577998311920?text=${encodedMessage}`;
    window.open(whatsappURL, '_blank');
    
    // Limpa o formulário
    this.reset();
    
    // Mostra mensagem de sucesso
    alert('Redirecionando para o WhatsApp. Obrigado pelo contato!');
});
</script>
{% endblock %}
